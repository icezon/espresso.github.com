
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Espresso Framework</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <script src="javascripts/jquery.js" type="text/javascript"></script>
  
  <link href="javascripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="javascripts/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
  <script src="javascripts/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

  <link href="javascripts/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script src="javascripts/google-code-prettify/prettify.js" type="text/javascript"></script>

  <link href="stylesheets/master.css" type="text/css" rel="stylesheet" />

</head>

<body>

  <div class="container">

    <div class="row">
      <div class="span2">
        <a href="index.html">
          <img src="images/logo.png" class="pull-right logo" /></a>
      </div>

      <div class="span6">
        <h1>
          <a href="index.html">
          Espresso Framework</a>
        </h1>
        <h4>
          Scalable Web Framework aimed at Speed and Simplicity
        </h4>
      </div>

      <div class="span pull-right">
        <div class="row">
          <div class="span">
            <h4>
              <a href="presentation.html">
                Official Presentation</a>
              </h4>
              <h4 style="white-space: nowrap;">
                <a href="Events.html">
                  Events</a> |
                <a href="CHANGELOG.html">
                  Change Log</a> 
            </h4>
          </div>
        </div>
      </div>
    </div>

    <hr/>
    <div class="row" style="text-align: center;">
    <div class="btn-toolbar">
      
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Intro.html" class="btn">
            Intro</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Intro.html#actions">
                  Actions</a>
              </li>
            
              <li>
                <a href="Intro.html#controllers">
                  Controllers</a>
              </li>
            
              <li>
                <a href="Intro.html#slices">
                  Slices</a>
              </li>
            
              <li>
                <a href="Intro.html#mvc-">
                  MVC?</a>
              </li>
            
              <li>
                <a href="Intro.html#models-">
                  Models?</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Routing.html" class="btn">
            Routing</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Routing.html#base-url">
                  Base URL</a>
              </li>
            
              <li>
                <a href="Routing.html#canonicals">
                  Canonicals</a>
              </li>
            
              <li>
                <a href="Routing.html#actions">
                  Actions</a>
              </li>
            
              <li>
                <a href="Routing.html#action-mapping">
                  Action Mapping</a>
              </li>
            
              <li>
                <a href="Routing.html#action-aliases">
                  Action Aliases</a>
              </li>
            
              <li>
                <a href="Routing.html#parametrization">
                  Parametrization</a>
              </li>
            
              <li>
                <a href="Routing.html#format">
                  Format</a>
              </li>
            
              <li>
                <a href="Routing.html#restful-actions">
                  RESTful Actions</a>
              </li>
            
              <li>
                <a href="Routing.html#rewriter">
                  Rewriter</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Setup.html" class="btn">
            Setup</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Setup.html#global-setup">
                  Global Setup</a>
              </li>
            
              <li>
                <a href="Setup.html#setup-by-name">
                  Setup by Name</a>
              </li>
            
              <li>
                <a href="Setup.html#setup-by-format">
                  Setup by Format</a>
              </li>
            
              <li>
                <a href="Setup.html#remote-setup">
                  Remote Setup</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Workflow.html" class="btn">
            Workflow</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Workflow.html#route">
                  Route</a>
              </li>
            
              <li>
                <a href="Workflow.html#params">
                  Params</a>
              </li>
            
              <li>
                <a href="Workflow.html#passing-control">
                  Passing Control</a>
              </li>
            
              <li>
                <a href="Workflow.html#fetching-body">
                  Fetching Body</a>
              </li>
            
              <li>
                <a href="Workflow.html#halt">
                  Halt</a>
              </li>
            
              <li>
                <a href="Workflow.html#redirect">
                  Redirect</a>
              </li>
            
              <li>
                <a href="Workflow.html#reload">
                  Reload</a>
              </li>
            
              <li>
                <a href="Workflow.html#error-handlers">
                  Error Handlers</a>
              </li>
            
              <li>
                <a href="Workflow.html#hooks">
                  Hooks</a>
              </li>
            
              <li>
                <a href="Workflow.html#authorization">
                  Authorization</a>
              </li>
            
              <li>
                <a href="Workflow.html#sessions">
                  Sessions</a>
              </li>
            
              <li>
                <a href="Workflow.html#flash">
                  Flash</a>
              </li>
            
              <li>
                <a href="Workflow.html#cookies">
                  Cookies</a>
              </li>
            
              <li>
                <a href="Workflow.html#content-type">
                  Content Type</a>
              </li>
            
              <li>
                <a href="Workflow.html#charset">
                  Charset</a>
              </li>
            
              <li>
                <a href="Workflow.html#cache-control">
                  Cache Control</a>
              </li>
            
              <li>
                <a href="Workflow.html#expires">
                  Expires</a>
              </li>
            
              <li>
                <a href="Workflow.html#last-modified">
                  Last Modified</a>
              </li>
            
              <li>
                <a href="Workflow.html#accepted-content-type">
                  Accepted Content Type</a>
              </li>
            
              <li>
                <a href="Workflow.html#cache-manager">
                  Cache Manager</a>
              </li>
            
              <li>
                <a href="Workflow.html#send-file">
                  Send File</a>
              </li>
            
              <li>
                <a href="Workflow.html#send-files">
                  Send Files</a>
              </li>
            
              <li>
                <a href="Workflow.html#attachment">
                  Attachment</a>
              </li>
            
              <li>
                <a href="Workflow.html#headers">
                  Headers</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="ViewAPI.html" class="btn">
            View API</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="ViewAPI.html#engine">
                  Engine</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#extension">
                  Extension</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#templates-path">
                  Templates Path</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#layouts-path">
                  Layouts Path</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#layout">
                  Layout</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#rendering-templates">
                  Rendering Templates</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#rendering-layouts">
                  Rendering Layouts</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#ad-hoc-rendering">
                  Ad hoc Rendering</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#path-resolver">
                  Path Resolver</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#templates-compilation">
                  Templates Compilation</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Streaming.html" class="btn">
            Streaming</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Streaming.html#server-sent-events">
                  Server-Sent Events</a>
              </li>
            
              <li>
                <a href="Streaming.html#websockets">
                  WebSockets</a>
              </li>
            
              <li>
                <a href="Streaming.html#chunked-responses">
                  Chunked Responses</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Assets.html" class="btn">
            Assets</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Assets.html#tag-helpers">
                  Tag Helpers</a>
              </li>
            
              <li>
                <a href="Assets.html#assets-mapper">
                  Assets Mapper</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="CRUD.html" class="btn">
            CRUD</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="CRUD.html#intro">
                  Intro</a>
              </li>
            
              <li>
                <a href="CRUD.html#resource">
                  Resource</a>
              </li>
            
              <li>
                <a href="CRUD.html#excluded-params">
                  Excluded Params</a>
              </li>
            
              <li>
                <a href="CRUD.html#root">
                  Root</a>
              </li>
            
              <li>
                <a href="CRUD.html#response">
                  Response</a>
              </li>
            
              <li>
                <a href="CRUD.html#error-handler">
                  Error Handler</a>
              </li>
            
              <li>
                <a href="CRUD.html#access-restriction">
                  Access Restriction</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Deploy.html" class="btn">
            Deploy</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Deploy.html#controllers">
                  Controllers</a>
              </li>
            
              <li>
                <a href="Deploy.html#slices">
                  Slices</a>
              </li>
            
              <li>
                <a href="Deploy.html#roots">
                  Roots</a>
              </li>
            
              <li>
                <a href="Deploy.html#run">
                  Run</a>
              </li>
            
              <li>
                <a href="Deploy.html#config-ru">
                  config.ru</a>
              </li>
            
            </ul>

        </div>
      
      
    </div>
    </div>
    <hr/>
    <h2 id='base-url'><a href='#base-url'>Base URL</a></h2>

<p>By default, each class will serve the path built from its underscored name.</p>

<p>Ex.: <code>Forum</code> will serve "/forum", <code>LatestNews</code> will serve "/latest_news" etc.</p>

<p>This can be changed by setting base URL via <code>map</code>.</p>

<p><strong>Example:</strong> - <code>Book</code> app should serve "/books"</p>

<pre>
class Book < E
  map '/books'

  # ...
end
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='canonicals'><a href='#canonicals'>Canonicals</a></h2>

<p>Lets say you need your <code>News</code> app to serve both "/news" and "/headlines" base URLs.<br>
It is easily done by using <code>map</code> with multiple params.<br>
First param will be treated as base URL, any other consequent params - as canonical ones.</p>

<p><strong>Example:</strong> - <code>News</code> should serve both "/news" and "/headlines" paths.</p>

<pre>
class News < E
  map :news, :headlines

  def index
    # ...
  end
end
</pre>


<p>To find out either current URL is a canonical URL use <code>canonical?</code><br>
It will return <code>nil</code> for base URLs and a string for canonial ones.</p>

<p><strong>Example:</strong></p>

<pre>
class App < E
  map '/', '/cms'

  def page

    # on /page         canonical? == nil
    # on /cms/page     canonical? == "/page"
  end

  # ...
end
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='actions'><a href='#actions'>Actions</a></h2>

<p>Defining Espresso actions is as simple as defining Ruby methods,<br>
cause Espresso actions actually are pure Ruby methods.</p>

<p><strong>Example:</strong> - Defining 2 actions - :index and :edit</p>

<pre>
class App < E
  map '/'

  def index
    # ...
  end

  def edit
    # ...
  end
end

# Now `App` will now serve:
#  -   /      # backed by `:index` action
#  -   /edit  # backed by `:edit`  action
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='action-mapping'><a href='#action-mapping'>Action Mapping</a></h2>

<p>Usually actions should also contain non-alphanumeric chars.<br>
Most common - hyphens, dots and slashes.</p>

<p>To address this, Espresso uses a map to translate action names into HTTP paths.</p>

<p>The default map looks like this:</p>

<pre>
"__"    => "/"
"___"   => "-"
"____"  => "."
</pre>


<p><strong>Example:</strong></p>

<pre>
def users__online  # 2 underscores
  # ...
end
# will serve users/online

def latest___news  # 3 underscores
  # ...
end
# will serve latest-news

def read____html   # 4 underscores
  # ...
end
# will serve read.html
</pre>


<p>You can <strong>define your own rules</strong> by using <code>path_rule</code> at class level.</p>

<p><strong>Example:</strong> - Convert bang methods into .html suffixed paths</p>

<pre>
class App < E
  map '/'

  path_rule "!", ".html"

  def news!
    # ...
  end
end

# :news! action will serve /news.html path
</pre>


<p><strong>Example:</strong> - Convert methods ending in "_j" into .json suffixed paths</p>

<pre>
class App < E
  map '/'

  path_rule /_j$/, ".json"

  def j_news
    # ...
  end
end
# :news_j action will serve /news.json path
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='action-aliases'><a href='#action-aliases'>Action Aliases</a></h2>

<p>Though path rules are useful enough, you can bypass them and set routes directly.</p>

<p><strong>Example:</strong> make <code>bar</code> method to serve <code>/bar</code>, <code>/some/url</code> and <code>/some/another/url</code></p>

<pre>
def bar
  # ...
end

action_alias 'some/url', :bar
action_alias 'some/another/url', :bar
</pre>


<p><strong>Example:</strong> make <code>foo</code> method to serve <code>/foo</code> and <code>/some/url</code> via any request method</p>

<pre>
def foo
  # ...
end
action_alias 'some/url', :foo
</pre>


<p><strong>Example:</strong> <code>get_foo</code> method will serve <code>/foo</code> and <code>/some/url</code> only via <code>GET</code> request method</p>

<pre>
def get_foo
  # ...
end
action_alias 'some/url', :get_foo
</pre>


<p>Also standard Ruby <code>alias</code> can be used:</p>

<pre>
class App < E
  map '/'

  def news
      # ...
  end
  alias news____html news
  alias headlines__recent____html news
end
</pre>


<p>Now <code>news</code> action will serve any of:</p>

<ul>
<li>/news</li>
<li>/news.html</li>
<li>/headlines/recent.html</li>
</ul>


<p><strong>NOTE:</strong> Private and protected methods usually are not publicly available via HTTP.<br>
However, if you add an action alias to such a method, <strong>it becomes public</strong>.<br>
To alias a private/protected method and keep it private,<br>
use  a  standard ruby alias rather than an action alias.</p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='parametrization'><a href='#parametrization'>Parametrization</a></h2>

<p>Espresso will split URL by slashes and feed obtained array to the Ruby method that backing current action.</p>

<p>Let's suppose we have an action like this:</p>

<pre>
class App < E
  map '/'

  def read type, status
    # ...
  end
end
</pre>


<p>If we do a request like this - "/read/news/latest", it will be decomposed as follow:</p>

<ul>
<li>action - read</li>
<li>params - news/latest</li>
</ul>


<p>Now Espresso will split params and call action:</p>

<pre>
read "news", "latest"
</pre>


<p>Current example will work just well, cause <code>read</code> receives as many arguments as expected.</p>

<p>Now let's suppose we do an request like: "/read/news"</p>

<p>This wont work, cause <code>read</code> receives 1 argument instead of 2 expected.</p>

<pre>
read "news"
</pre>


<p>And "/read/news/articles/latest" wont work either, cause <code>read</code> receives too many arguments.</p>

<pre>
read "news", "articles", "latest"
</pre>


<p>However, as we know, Ruby is powerful enough.</p>

<p>And Espresso uses this power in full.</p>

<p>So, when we need <code>read</code> method to accept 1 or 2 args,
we simply give the last param a default value:</p>

<pre>
class App < E
  map '/'

  def read type, status = 'latest'
    # ...
  end
end
</pre>


<p>Now <code>read</code> action will serve "/read/news" as well as
"/read/news/latest", "/read/news/archived", "/read/news/anything!"</p>

<p>Also we can make "/read/news/articles/latest" to work.</p>

<pre>
class App < E
    map '/'

    def read *types, status
        # ...
    end
end
</pre>


<p>That's it! Now when calling "/read/news/articles/latest",
<code>types</code> will be an array like ["news", "articles"] and  status will be equal to "latest".</p>

<p>In a word, if Ruby method works with given params, HTTP action will work too.<br>
Otherwise, HTTP action will return "404 NotFound" error.</p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='format'><a href='#format'>Format</a></h2>

<p><code>format</code> allow to manipulate routing by instructing actions to respond to various extensions.</p>

<p>Also it is aimed to automatically set <code>Content-Type</code> header based on used extension.</p>

<p><strong>Example:</strong></p>

<pre>
class App < E
  map '/'
  format '.xml'

  def article
    # ...
  end
end
</pre>


<p>In the example above, article action will respond to both "/article" and "/article.xml" URLs.</p>

<p><code>format</code> accepts any number of extensions.</p>

<p>The second meaning of <code>format</code> is to automatically set Content-Type header.</p>

<p>Content type are extracted from <code>Rack::Mime::MIME_TYPES</code> map.<br>
Ex: <code>format '.txt'</code> will return the content type extracted via <code>Rack::Mime::MIME_TYPES.fetch('.txt')</code></p>

<p><strong>Worth to note</strong> that <code>format</code> will act on all actions.</p>

<p>To set format(s) only for specific actions, use <code>format_for</code>.</p>

<p><strong>Example:</strong> - only <code>pages</code> action will respond to URLs ending in .html and .xml</p>

<pre>
class App < E
  map '/'

  format_for :pages, '.xml', '.html'

  def pages
    # ...
  end

  def news
    # ...
  end

  # ...
end
</pre>


<p>Voila, now App will respond to any of "/pages", "/pages.html" and "/pages.xml"<br>
but not "/news.html" nor "/news.xml", cause <code>format</code> was set for <code>pages</code> action only.</p>

<p>It is also possible to disable format for specific actions by using <code>disable_format_for</code>:</p>

<pre>
class App < E
  map '/'

  format '.xml' # this will enable .xml format for all actions
  
  disable_format_for :news, :pages # disabling format for :pages and :news actions

  # ...
end
</pre>


<p><strong>Worth to note</strong> that Espresso will get rid of extension passed with last param,
so you get clean params without manually remove format.<br>
Meant that when "/news/100.html" requested, you get "100" param inside <code>news</code> action, rather than "100.html"</p>

<p><strong>Example:</strong></p>

<pre>
class App < E
  format '.xml'

  def read item = nil
    # on /read             item == nil
    # on /read.xml         item == nil
    # on /read.xml/book    404 NotFound
    # on /read/book        item == "book"
    # on /read/book.xml    item == "book"
    # on /read/100.xml     item == "100"
    # on /read/blah.xml    item == "blah"
    # on /read/blah.json   item == "blah.json"
  end
end
</pre>


<p></pre>
/read.xml                will return XML Content-Type
/read/book.xml           will return XML Content-Type too
/read/100.xml            will return XML Content-Type as well
/read/anything-here.xml  will return XML Content-Type either
/read                    instead will return default Content-Type
/read/book               will return default Content-Type too
</pre></p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='restful-actions'><a href='#restful-actions'>RESTful Actions</a></h2>

<p>By default, verbless actions will respond to any request method.</p>

<p><strong>Example:</strong> - <code>index</code> action responding to any request method</p>

<pre>
class App < E

  def index
  end
end
</pre>


<p>To make an action to respond only to a specific request method,
simply prepend desired request method verb to action name.</p>

<p><strong>Example:</strong></p>

<pre>
class App < E

  def post_news  # will serve POST /news
    # ...
  end

  def put_news   # will serve PUT /news
    # ...
  end

  # etc.
end
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='rewriter'><a href='#rewriter'>Rewriter</a></h2>

<p>Espresso uses a really flexible rewrite engine
that allow to redirect the browser to new address
as well as pass control to arbitrary controller(without redirect)
or just send a custom response to browser(without redirect as well).</p>

<p>A rewrite rule consist of a regular expression and a block that receives matches via arguments.</p>

<p><code>redirect</code> and <code>permanent_redirect</code> will redirect browser to new address with 302 and 301 codes respectively.</p>

<p><strong>Example:</strong></p>

<pre>
app = EApp.new do

  rewrite /\A\/(.*)\.php\Z/ do |title|
    redirect Cms.route(:index, title)
  end

  # ...
end
</pre>


<p><code>pass</code> will pass control to an arbitrary controller, without redirect.</p>

<p><strong>Example:</strong></p>

<pre>
class Articles < E

  def read title
    # ...
  end
end

class Pages < E
  
  def archive title
    # ...
  end
end

app = EApp.new do

  # pass old pages to archive action
  rewrite /\A\/(.*)\.php\Z/ do |title|
    pass Pages, :archive, title
  end

  # pages ending in html are in fact articles, so passing control to Articles controller
  rewrite /\A\/(.*)\.html\Z/ do |title|
    pass Articles, :read, title
  end

end
</pre>


<p><code>halt</code> will send response to browser and stop any code execution, without redirect.</p>

<p>It accepts from 0 to 3 arguments.<br>
If argument is a hash, it is added to headers.<br>
If argument is a Integer, it is treated as Status-Code.<br>
Any other arguments are treated as body.</p>

<p>If a single argument given and it is an Array, it is treated as a bare Rack response and instantly sent to browser.</p>

<p><strong>Example:</strong></p>

<pre>
app = EApp.new do

  rewrite /\A\/archived\/(.*)\.html\Z/ do |title|

    unless page = Model::Page.first(:url => title)
      halt 404, 'page not found'
    end

    halt page.content, 'Last-Modified' => page.last_modified.to_rfc2822
  end
end
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

    <hr/>

    <footer class="footer well">

      <div class="row">
        <div class="span4">
          <p>
            License: MIT
          </p>
          <p>
            Author: Silviu Rusu
          </p>
          <p>
            Source Code:
            <a href="https://github.com/espresso/espresso">
                https://github.com/espresso/espresso</a>
          </p>
        </div>
      
      
        <div class="span6 pull-right">
          <p>
            Issues/Bugs:
            <a href="https://github.com/espresso/espresso/issues">
                https://github.com/espresso/espresso/issues</a>
            </p>
            <p>
              <strong>Contributors are very Welcome!</strong>
            </p>
            <p>
              IRC channel: #espressorb on irc.freenode.net
            </p>
        </div>
      </div>
      
    </footer>

  </div>
  
  <a href="https://github.com/espresso/espresso"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

  <script type="text/javascript">
    $(function() {
        $('pre').addClass('prettyprint lang-ruby');
        prettyPrint();
    });
  </script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27879048-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  </body>
</html>
